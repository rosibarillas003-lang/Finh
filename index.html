<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="es"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;FinanceApp - Sincronizada&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Tailwind CSS para diseño rápido --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- React y ReactDOM --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Prop-Types (Requisito para Recharts en entorno navegador) --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Recharts para gráficas profesionales --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/recharts@2.10.3/umd/Recharts.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Babel para procesar JSX en tiempo real --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://unpkg.com/@babel/standalone/babel.min.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap');</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>-webkit-tap-highlight-color: transparent;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f8fafc;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Eliminar flechas de inputs numéricos */</p>
<p class="p1"><span class="Apple-converted-space">        </span>input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.custom-scrollbar::-webkit-scrollbar { width: 4px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.fade-in { animation: fadeIn 0.4s ease-out; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="root"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script type="text/babel"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const { useState, useMemo, useEffect } = React;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>PieChart, Pie, Cell, ResponsiveContainer,<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>XAxis, YAxis, Tooltip, Legend, BarChart, Bar, CartesianGrid, LabelList<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>} = Recharts;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Iconos SVG internos para máxima estabilidad</p>
<p class="p1"><span class="Apple-converted-space">        </span>const Icons = {</p>
<p class="p1"><span class="Apple-converted-space">            </span>Wallet: () =&gt; &lt;svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/&gt;&lt;path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/&gt;&lt;path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/&gt;&lt;/svg&gt;,</p>
<p class="p1"><span class="Apple-converted-space">            </span>Piggy: () =&gt; &lt;svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;path d="M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1 .5-1.5 1-2V5Z"/&gt;&lt;path d="M7 11v.01"/&gt;&lt;path d="M19 11h.01"/&gt;&lt;path d="M12 2v4"/&gt;&lt;/svg&gt;,</p>
<p class="p1"><span class="Apple-converted-space">            </span>Loans: () =&gt; &lt;svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;path d="m11 15-3-3 3-3"/&gt;&lt;path d="m15 9 3 3-3 3"/&gt;&lt;rect width="20" height="14" x="2" y="5" rx="2"/&gt;&lt;path d="M12 5v14"/&gt;&lt;/svg&gt;,</p>
<p class="p1"><span class="Apple-converted-space">            </span>Cloud: () =&gt; &lt;svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;path d="M17.5 19c2.5 0 4.5-2 4.5-4.5 0-2-1.3-3.7-3.1-4.2C18.4 6.2 14.8 3 10.5 3 6.7 3 3.5 5.5 2.4 9 1 9.9 0 11.5 0 13.3c0 2 1.6 3.7 3.6 3.7h13.9Z"/&gt;&lt;/svg&gt;,</p>
<p class="p1"><span class="Apple-converted-space">            </span>Plus: () =&gt; &lt;svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;line x1="12" y1="5" x2="12" y2="19"/&gt;&lt;line x1="5" y1="12" x2="19" y2="12"/&gt;&lt;/svg&gt;,</p>
<p class="p1"><span class="Apple-converted-space">            </span>Trash: () =&gt; &lt;svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;path d="M3 6h18"/&gt;&lt;path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/&gt;&lt;path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/&gt;&lt;line x1="10" y1="11" x2="10" y2="17"/&gt;&lt;line x1="14" y1="11" x2="14" y2="17"/&gt;&lt;/svg&gt;,</p>
<p class="p1"><span class="Apple-converted-space">            </span>Smartphone: () =&gt; &lt;svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;rect width="14" height="20" x="5" y="2" rx="2" ry="2"/&gt;&lt;path d="M12 18h.01"/&gt;&lt;/svg&gt;,</p>
<p class="p1"><span class="Apple-converted-space">            </span>Monitor: () =&gt; &lt;svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"&gt;&lt;rect width="20" height="14" x="2" y="3" rx="2"/&gt;&lt;line x1="8" y1="21" x2="16" y2="21"/&gt;&lt;line x1="12" y1="17" x2="12" y2="21"/&gt;&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const MONTHS = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const TAGS = ['Belleza', 'Salidas', 'Efectivo', 'Compras', 'Uber', 'Comida'];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const COLORS = ['#4f46e5', '#db2777', '#0ea5e9', '#059669', '#d97706', '#7c3aed'];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const App = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const [activeTab, setActiveTab] = useState('Enero');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const [isMobileMode, setIsMobileMode] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const [showMonthSelector, setShowMonthSelector] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const [scriptUrl, setScriptUrl] = useState('');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const [syncStatus, setSyncStatus] = useState('idle'); // idle, loading, success, error</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const [data, setData] = useState({</p>
<p class="p1"><span class="Apple-converted-space">                </span>config: { pNec: 50, pDes: 30, pAho: 20 },</p>
<p class="p1"><span class="Apple-converted-space">                </span>loans: [],</p>
<p class="p1"><span class="Apple-converted-space">                </span>monthly: MONTHS.reduce((acc, month) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>acc[month] = { salario: 0, entradas: 0, mesPasado: 0, prestado: 0, ahorroManual: 0, gastosFijos: [], gastosVariables: [] };</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return acc;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}, {})</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Cargar configuración de sincronización guardada</p>
<p class="p1"><span class="Apple-converted-space">            </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const savedUrl = localStorage.getItem('finance_script_url');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (savedUrl) setScriptUrl(savedUrl);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, []);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const saveScriptUrl = (url) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>setScriptUrl(url);</p>
<p class="p1"><span class="Apple-converted-space">                </span>localStorage.setItem('finance_script_url', url);</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- SINCRONIZACIÓN GOOGLE SHEETS ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>const syncToSheets = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!scriptUrl) return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>setSyncStatus('loading');</p>
<p class="p1"><span class="Apple-converted-space">                </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>await fetch(scriptUrl, {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>method: 'POST',</p>
<p class="p1"><span class="Apple-converted-space">                        </span>mode: 'no-cors',</p>
<p class="p1"><span class="Apple-converted-space">                        </span>headers: { 'Content-Type': 'application/json' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>body: JSON.stringify(data)</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setSyncStatus('success');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setTimeout(() =&gt; setSyncStatus('idle'), 3000);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setSyncStatus('error');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const loadFromSheets = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!scriptUrl) return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>setSyncStatus('loading');</p>
<p class="p1"><span class="Apple-converted-space">                </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const response = await fetch(scriptUrl);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const cloudData = await response.json();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (cloudData &amp;&amp; cloudData.monthly) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setData(cloudData);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setSyncStatus('success');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setTimeout(() =&gt; setSyncStatus('idle'), 2000);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setSyncStatus('error');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const fmt = (val) =&gt; val.toLocaleString('es-ES', { style: 'currency', currency: 'EUR' });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- HANDLERS ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>const updateConfig = (field, value) =&gt; setData(prev =&gt; ({ ...prev, config: { ...prev.config, [field]: parseInt(value) || 0 } }));</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const addLoan = (nombre, monto) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const newLoan = { id: Date.now(), nombre, monto: parseFloat(monto), pagado: false, fecha: new Date().toLocaleDateString('es-ES') };</p>
<p class="p1"><span class="Apple-converted-space">                </span>setData(prev =&gt; ({ ...prev, loans: [newLoan, ...prev.loans] }));</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const updateMonth = (month, field, value) =&gt; setData(prev =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">                </span>...prev,</p>
<p class="p1"><span class="Apple-converted-space">                </span>monthly: { ...prev.monthly, [month]: { ...prev.monthly[month], [field]: parseFloat(value) || 0 } }</p>
<p class="p1"><span class="Apple-converted-space">            </span>}));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const addGasto = (month, type) =&gt; setData(prev =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">                </span>...prev,</p>
<p class="p1"><span class="Apple-converted-space">                </span>monthly: { ...prev.monthly, [month]: { ...prev.monthly[month], [type]: [...prev.monthly[month][type], { id: Date.now(), nombre: '', valor: 0, tag: TAGS[0] }] } }</p>
<p class="p1"><span class="Apple-converted-space">            </span>}));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const updateGasto = (month, type, id, field, value) =&gt; setData(prev =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">                </span>...prev,</p>
<p class="p1"><span class="Apple-converted-space">                </span>monthly: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>...prev.monthly,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>[month]: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>...prev.monthly[month],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>[type]: prev.monthly[month][type].map(item =&gt; item.id === id ? { ...item, [field]: field === 'valor' ? parseFloat(value) || 0 : value } : item)</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const deleteGasto = (month, type, id) =&gt; setData(prev =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">                </span>...prev,</p>
<p class="p1"><span class="Apple-converted-space">                </span>monthly: { ...prev.monthly, [month]: { ...prev.monthly[month], [type]: prev.monthly[month][type].filter(item =&gt; item.id !== id) } }</p>
<p class="p1"><span class="Apple-converted-space">            </span>}));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- LOGICA ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>const currentMonthData = data.monthly[activeTab] || {};</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalIngresos = (currentMonthData.salario || 0) + (currentMonthData.entradas || 0) + (currentMonthData.mesPasado || 0) + (currentMonthData.prestado || 0);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const baseCalculo = Math.max(0, totalIngresos - (currentMonthData.ahorroManual || 0));</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const valNec = baseCalculo * (data.config.pNec / 100);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const valDes = baseCalculo * (data.config.pDes / 100);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const valAhoExtra = baseCalculo * (data.config.pAho / 100);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalGastosFijos = currentMonthData.gastosFijos?.reduce((sum, g) =&gt; sum + (parseFloat(g.valor) || 0), 0) || 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalGastosVar = currentMonthData.gastosVariables?.reduce((sum, g) =&gt; sum + (parseFloat(g.valor) || 0), 0) || 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalGastadoTotal = totalGastosFijos + totalGastosVar;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const dineroDisponibleVista = (valNec + valDes) - totalGastadoTotal;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const isConfigValid = (data.config.pNec + data.config.pDes + data.config.pAho) === 100;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const isNecOver = totalGastosFijos &gt; valNec;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const isDesOver = totalGastosVar &gt; valDes;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const categoryData = useMemo(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const counts = {};</p>
<p class="p1"><span class="Apple-converted-space">                </span>TAGS.forEach(tag =&gt; counts[tag] = 0);</p>
<p class="p1"><span class="Apple-converted-space">                </span>currentMonthData.gastosVariables?.forEach(g =&gt; counts[g.tag] = (counts[g.tag] || 0) + (parseFloat(g.valor) || 0));</p>
<p class="p1"><span class="Apple-converted-space">                </span>return Object.keys(counts).map(tag =&gt; ({ name: tag, value: counts[tag] })).filter(d =&gt; d.value &gt; 0);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, [currentMonthData]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const savingsAnalytics = MONTHS.map(m =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const mData = data.monthly[m];</p>
<p class="p1"><span class="Apple-converted-space">                </span>const mIngresos = (mData.salario || 0) + (mData.entradas || 0) + (mData.mesPasado || 0) + (mData.prestado || 0);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const mBase = Math.max(0, mIngresos - (mData.ahorroManual || 0));</p>
<p class="p1"><span class="Apple-converted-space">                </span>const f = mData.gastosFijos?.reduce((s, g) =&gt; s + (parseFloat(g.valor) || 0), 0) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const v = mData.gastosVariables?.reduce((s, g) =&gt; s + (parseFloat(g.valor) || 0), 0) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const remanente = Math.max(0, (mBase * ((data.config.pNec + data.config.pDes) / 100)) - (f + v));</p>
<p class="p1"><span class="Apple-converted-space">                </span>return { month: m, ingresos: mIngresos, total: (mData.ahorroManual || 0) + (mBase * (data.config.pAho / 100)) + remanente };</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>return (</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className={`flex h-screen transition-all duration-300 ${isMobileMode ? 'justify-center items-center p-2 bg-slate-200' : 'bg-slate-50'}`}&gt;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button onClick={() =&gt; setIsMobileMode(!isMobileMode)} className="fixed bottom-6 right-6 z-[100] bg-indigo-600 text-white p-4 rounded-2xl shadow-xl hover:bg-indigo-700 flex items-center gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{isMobileMode ? &lt;Icons.Monitor /&gt; : &lt;Icons.Smartphone /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-xs font-bold uppercase hidden md:block"&gt;{isMobileMode ? 'PC' : 'Móvil'}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>{!isMobileMode &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;aside className="w-64 bg-white border-r border-slate-200 flex flex-col shrink-0 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div className="p-8 border-b border-slate-50 flex items-center gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="bg-indigo-600 p-2 rounded-xl text-white shadow-md shadow-indigo-100"&gt;&lt;Icons.Wallet /&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h1 className="font-bold text-xl text-slate-800 tracking-tighter italic"&gt;FinanceApp&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;nav className="flex-1 overflow-y-auto p-4 space-y-1 custom-scrollbar"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button onClick={() =&gt; setActiveTab('Ahorros')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-semibold ${activeTab === 'Ahorros' ? 'bg-indigo-50 text-indigo-700 shadow-sm' : 'text-slate-500 hover:bg-slate-50'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;Icons.Piggy /&gt; Ahorros</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button onClick={() =&gt; setActiveTab('Préstamos')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-semibold ${activeTab === 'Préstamos' ? 'bg-indigo-50 text-indigo-700 shadow-sm' : 'text-slate-500 hover:bg-slate-50'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;Icons.Loans /&gt; Préstamos</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="pt-6 pb-2 px-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest"&gt;Nube&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="px-4 space-y-2 pb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;input type="text" placeholder="URL Google Script" className="w-full bg-slate-50 border border-slate-100 rounded-lg p-2 text-[10px] focus:bg-white" value={scriptUrl} onChange={(e) =&gt; saveScriptUrl(e.target.value)} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div className="flex gap-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;button onClick={syncToSheets} className="flex-1 bg-slate-900 text-white text-[9px] font-bold p-2 rounded-lg flex items-center justify-center gap-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>{syncStatus === 'loading' ? '...' : &lt;&gt;&lt;Icons.Cloud /&gt; GUARDAR&lt;/&gt;}</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;button onClick={loadFromSheets} className="flex-1 bg-white border border-slate-200 text-slate-700 text-[9px] font-bold p-2 rounded-lg"&gt;CARGAR&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="pt-2 pb-2 px-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest"&gt;Meses&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>{MONTHS.map(m =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;button key={m} onClick={() =&gt; setActiveTab(m)} className={`w-full flex items-center px-4 py-2.5 rounded-xl transition-all text-sm font-medium ${activeTab === m ? 'bg-slate-800 text-white shadow-md' : 'text-slate-500 hover:bg-slate-50'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>{m}</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/nav&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/aside&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className={`flex-1 flex flex-col transition-all duration-500 ${isMobileMode ? 'max-w-[400px] max-h-[820px] w-full h-full bg-white rounded-3xl border-[12px] border-slate-900 shadow-2xl overflow-hidden relative' : 'overflow-hidden'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{isMobileMode &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;header className="bg-white px-6 pt-10 pb-4 border-b border-slate-100 flex justify-between items-center sticky top-0 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h2 className="font-bold text-slate-800 uppercase text-xs tracking-widest"&gt;{activeTab}&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button onClick={syncToSheets} className="bg-indigo-50 p-2 rounded-lg text-indigo-600"&gt;&lt;Icons.Cloud /&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/header&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;main className={`flex-1 overflow-y-auto custom-scrollbar ${isMobileMode ? 'p-5 pb-32' : 'p-8 lg:p-14'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{activeTab === 'Ahorros' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="space-y-8 fade-in"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div className="bg-white rounded-2xl border border-slate-200 p-8 flex flex-wrap items-center justify-between gap-6 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div&gt;&lt;h3 className="text-2xl font-bold text-slate-900 tracking-tight tracking-tighter"&gt;Mi Patrimonio&lt;/h3&gt;&lt;p className="text-slate-500 text-sm"&gt;Ahorro total anual.&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className="bg-indigo-600 px-8 py-6 rounded-2xl text-white shadow-xl shadow-indigo-100 text-center"&gt;&lt;span className="text-[10px] font-bold uppercase tracking-widest block mb-1 opacity-70"&gt;Suma Total&lt;/span&gt;&lt;span className="text-3xl font-bold"&gt;{fmt(savingsAnalytics.reduce((sum, s) =&gt; sum + s.total, 0))}&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div className="bg-white border border-slate-200 rounded-2xl overflow-hidden shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;table className="w-full text-left text-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;tr className="bg-slate-50 text-slate-400 font-bold uppercase text-[10px] border-b border-slate-100"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;th className="px-6 py-4"&gt;Mes&lt;/th&gt;&lt;th className="px-6 py-4"&gt;Ingresos&lt;/th&gt;&lt;th className="px-6 py-4 text-right"&gt;Ahorro&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;tbody className="divide-y divide-slate-100 font-medium"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>{savingsAnalytics.map((s, i) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;tr key={i} className="hover:bg-slate-50 transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;td className="px-6 py-4 font-semibold text-slate-700"&gt;{s.month}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;td className="px-6 py-4 text-slate-400"&gt;{fmt(s.ingresos)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;td className="px-6 py-4 text-right font-black text-emerald-600"&gt;{fmt(s.total)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                            </span>{activeTab === 'Préstamos' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="space-y-8 fade-in"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div className="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;h3 className="font-bold text-slate-800 text-sm"&gt;Nuevo Préstamo&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;form onSubmit={(e) =&gt; { e.preventDefault(); addLoan(e.target.nombre.value, e.target.monto.value); e.target.reset(); }} className={`flex gap-4 ${isMobileMode ? 'flex-col' : ''}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;input name="nombre" type="text" placeholder="Deudor" className="flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm focus:bg-white transition-all outline-none" required /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;input name="monto" type="number" step="0.01" placeholder="Monto €" className={`bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm focus:bg-white outline-none ${isMobileMode ? 'w-full' : 'w-40'}`} required /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;button type="submit" className="bg-indigo-600 text-white px-8 py-3 rounded-xl text-xs font-bold uppercase tracking-widest shadow-md"&gt;Agregar&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/form&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div className="space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>{data.loans.map(loan =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div key={loan.id} className={`flex items-center justify-between p-5 rounded-2xl border shadow-sm transition-all ${loan.pagado ? 'bg-slate-50 opacity-60' : 'bg-white border-slate-200'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;div className="flex items-center gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;div className={`w-10 h-10 rounded-xl flex items-center justify-center ${loan.pagado ? 'bg-emerald-100 text-emerald-600' : 'bg-amber-100 text-amber-600'}`}&gt;{loan.pagado ? "✓" : "⏰"}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;div&gt;&lt;p className={`font-bold text-sm ${loan.pagado ? 'line-through text-slate-400' : 'text-slate-800'}`}&gt;{loan.nombre}&lt;/p&gt;&lt;span className="text-[10px] text-slate-400 font-bold uppercase"&gt;{loan.fecha}&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;div className="flex items-center gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;span className="text-base font-bold text-slate-900"&gt;{fmt(loan.monto)}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;button onClick={() =&gt; toggleLoanStatus(loan.id)} className={`text-[10px] font-bold uppercase px-4 py-2 rounded-lg border ${loan.pagado ? 'bg-white border-slate-200' : 'bg-emerald-600 text-white'}`}&gt;{loan.pagado ? 'Pendiente' : 'Pagado'}&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                            </span>{MONTHS.includes(activeTab) &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="space-y-8 fade-in"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;header className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;h2 className="text-4xl font-bold text-slate-900 tracking-tighter"&gt;{activeTab}&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className="bg-white border border-slate-200 px-6 py-4 rounded-2xl flex items-center gap-4 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="text-center border-r border-slate-100 pr-4"&gt;&lt;span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest block"&gt;Ingresos&lt;/span&gt;&lt;span className="text-lg font-bold text-slate-800"&gt;{fmt(totalIngresos)}&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="text-center"&gt;&lt;span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest block"&gt;Gastos&lt;/span&gt;&lt;span className="text-lg font-bold text-slate-800"&gt;{fmt(totalGastadoTotal)}&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;section className="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;h3 className="font-bold text-slate-800 text-[11px] uppercase tracking-widest flex items-center gap-2 underline decoration-emerald-200 decoration-4"&gt;Flujo de Caja&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className={`grid gap-4 ${isMobileMode ? 'grid-cols-1' : 'grid-cols-2 lg:grid-cols-4'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>{[{l:'Sueldo Base',k:'salario'},{l:'Extras',k:'entradas'},{l:'Pasado',k:'mesPasado'},{l:'Préstamo',k:'prestado'}].map(i =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;div key={i.k} className="bg-slate-50/50 p-4 rounded-xl border border-slate-100 focus-within:bg-white focus-within:ring-2 focus-within:ring-indigo-100 transition-all"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;label className="text-[9px] font-bold text-slate-400 uppercase mb-2 block"&gt;{i.l}&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;div className="flex items-center gap-1 font-bold text-lg text-slate-800"&gt;&lt;span className="text-slate-300"&gt;€&lt;/span&gt;&lt;input type="number" className="bg-transparent border-none w-full p-0 outline-none" value={currentMonthData[i.k] || ''} onChange={(e)=&gt;updateMonth(activeTab,i.k,e.target.value)} /&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;section className="bg-slate-900 text-white p-6 rounded-2xl shadow-xl flex flex-col md:flex-row justify-between items-center gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className="flex items-center gap-4"&gt;&lt;div className="bg-white/10 p-3 rounded-xl text-indigo-400"&gt;&lt;Icons.Piggy /&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 className="font-bold text-sm tracking-wide"&gt;Ahorro Manual&lt;/h4&gt;&lt;p className="text-indigo-200 text-[10px] opacity-60"&gt;Se deduce primero del total.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className="bg-white/5 p-4 rounded-xl border border-white/10 w-full md:w-56 text-center"&gt;&lt;div className="flex items-center justify-center gap-3"&gt;&lt;span className="text-indigo-400 font-bold text-xl"&gt;€&lt;/span&gt;&lt;input type="number" className="bg-transparent border-none p-0 text-3xl font-bold text-white outline-none w-full text-center" value={currentMonthData.ahorroManual || ''} onChange={(e)=&gt;updateMonth(activeTab,'ahorroManual',e.target.value)} /&gt;&lt;/div&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div className={`grid gap-8 ${isMobileMode ? 'grid-cols-1' : 'grid-cols-3'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className="lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm space-y-10"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="flex justify-between items-center font-bold text-[11px] uppercase tracking-widest text-slate-800"&gt;Reparto Regla (%) {!isConfigValid &amp;&amp; &lt;span className="text-rose-500 ml-2 animate-pulse font-black underline"&gt;! 100% necesario&lt;/span&gt;}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="space-y-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>{[{l:'Fijos',k:'pNec',c:'accent-indigo-600',v:valNec},{l:'Var.',k:'pDes',c:'accent-pink-600',v:valDes},{l:'Aho.',k:'pAho',c:'accent-emerald-600',v:valAhoExtra}].map(item =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;div key={item.k} className="flex flex-col sm:flex-row items-center gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;div className="w-full sm:w-40"&gt;&lt;label className="text-[10px] font-bold text-slate-400 uppercase"&gt;{item.l}&lt;/label&gt;&lt;span className="text-lg font-bold text-slate-800 block"&gt;{data.config[item.k]}%&lt;/span&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;div className="flex-1 w-full"&gt;&lt;input type="range" min="0" max="100" className={`w-full h-2 rounded-lg cursor-pointer ${item.c}`} value={data.config[item.k]} onChange={(e) =&gt; updateConfig(item.k, e.target.value)} /&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;div className="w-full sm:w-28 bg-slate-50 px-3 py-2 rounded-xl text-center border border-slate-100 font-bold text-slate-700 text-xs"&gt;{fmt(item.v)}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm flex flex-col items-center justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;h3 className="font-bold text-[10px] text-slate-400 uppercase mb-4 tracking-widest"&gt;Disponible Real&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="h-56 w-full relative flex items-center justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;div className="absolute flex flex-col items-center justify-center z-10 pointer-events-none text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;span className={`text-3xl font-bold tracking-tighter ${dineroDisponibleVista &lt; 0 ? 'text-rose-500 animate-pulse' : 'text-slate-800'}`}&gt;{fmt(dineroDisponibleVista)}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;span className="text-[9px] font-bold text-slate-400 uppercase mt-1"&gt;Sobrante&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;ResponsiveContainer width="100%" height="100%"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;PieChart margin={{ top: 5, right: 5, bottom: 5, left: 5 }}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;Pie data={[{v:totalGastadoTotal,fill:dineroDisponibleVista&lt;0?'#f43f5e':'#4f46e5'}, {v:Math.max(0, dineroDisponibleVista), fill:'#f1f5f9'}]} innerRadius={70} outerRadius={85} paddingAngle={8} dataKey="v" stroke="none" startAngle={90} endAngle={450} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;/PieChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>&lt;/ResponsiveContainer&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div className={`grid gap-8 ${isMobileMode ? 'grid-cols-1' : 'grid-cols-2'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className={`bg-white p-6 rounded-2xl border shadow-sm ${isNecOver ? 'border-rose-100 bg-rose-50/20' : 'border-slate-200'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="flex justify-between items-center mb-8"&gt;&lt;div&gt;&lt;h3 className="font-bold text-lg tracking-tight"&gt;Fijos&lt;/h3&gt;&lt;p className="text-[9px] font-bold text-slate-400 uppercase tracking-widest italic"&gt;Límite: {fmt(valNec)}&lt;/p&gt;&lt;/div&gt;&lt;button onClick={()=&gt;addGasto(activeTab,'gastosFijos')} className="bg-slate-900 text-white p-2 rounded-xl shadow-md hover:bg-slate-800"&gt;&lt;Icons.Plus /&gt;&lt;/button&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>{currentMonthData.gastosFijos.map(g =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;div key={g.id} className="flex flex-row items-center gap-3 bg-white border border-slate-100 p-3 rounded-xl shadow-sm group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;input className="flex-1 bg-transparent border-none text-sm font-semibold outline-none text-slate-700 min-w-0" placeholder="Descripción" value={g.nombre} onChange={(e)=&gt;updateGasto(activeTab,'gastosFijos',g.id,'nombre',e.target.value)} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;div className="flex items-center bg-slate-50 rounded-lg px-3 py-2 border border-slate-200 w-32 shrink-0"&gt;&lt;span className="text-slate-300 text-xs mr-1 font-bold"&gt;€&lt;/span&gt;&lt;input type="number" className="w-full bg-transparent border-none p-0 text-sm font-bold text-slate-800 outline-none text-right" placeholder="0" value={g.valor || ''} onChange={(e)=&gt;updateGasto(activeTab,'gastosFijos',g.id,'valor',e.target.value)} /&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;button onClick={()=&gt;deleteGasto(activeTab,'gastosFijos',g.id)} className="text-slate-200 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-all"&gt;&lt;Icons.Trash /&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className={`bg-white p-6 rounded-2xl border shadow-sm ${isDesOver ? 'border-rose-100 bg-rose-50/20' : 'border-slate-200'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="flex justify-between items-center mb-8"&gt;&lt;div&gt;&lt;h3 className="font-bold text-lg tracking-tight"&gt;Variables&lt;/h3&gt;&lt;p className="text-[9px] font-bold text-slate-400 uppercase tracking-widest italic"&gt;Límite: {fmt(valDes)}&lt;/p&gt;&lt;/div&gt;&lt;button onClick={()=&gt;addGasto(activeTab,'gastosVariables')} className="bg-slate-900 text-white p-2 rounded-xl shadow-md hover:bg-slate-800"&gt;&lt;Icons.Plus /&gt;&lt;/button&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;div className="space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>{currentMonthData.gastosVariables.map(g =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;div key={g.id} className="flex flex-col gap-3 bg-white border border-slate-100 p-4 rounded-xl shadow-sm group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;div className="flex items-center gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                            </span>&lt;select className="bg-indigo-50 border-none rounded-lg px-2 py-1 text-[9px] font-black text-indigo-700 outline-none" value={g.tag} onChange={(e)=&gt;updateGasto(activeTab,'gastosVariables',g.id,'tag',e.target.value)}&gt;{TAGS.map(t =&gt; &lt;option key={t} value={t}&gt;{t}&lt;/option&gt;)}&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                            </span>&lt;input className="flex-1 min-w-0 bg-transparent border-none text-sm font-semibold outline-none text-slate-700" value={g.nombre} onChange={(e)=&gt;updateGasto(activeTab,'gastosVariables',g.id,'nombre',e.target.value)} placeholder="¿Qué compraste?" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                            </span>&lt;button onClick={()=&gt;deleteGasto(activeTab,'gastosVariables',g.id)} className="text-slate-200 hover:text-rose-500 opacity-0 group-hover:opacity-100"&gt;&lt;Icons.Trash /&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                        </span>&lt;div className="flex items-center bg-slate-50 rounded-xl px-5 py-2.5 border border-slate-200 self-end w-full sm:w-44"&gt;&lt;span className="text-slate-300 text-sm font-bold mr-2"&gt;€&lt;/span&gt;&lt;input type="number" className="w-full bg-transparent border-none p-0 text-sm font-bold text-slate-800 outline-none text-right" placeholder="0" value={g.valor || ''} onChange={(e)=&gt;updateGasto(activeTab,'gastosVariables',g.id,'valor',e.target.value)} /&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                                    </span></p>
<p class="p1"><span class="Apple-converted-space">                                    </span>{categoryData.length &gt; 0 &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;div className="bg-white p-10 rounded-2xl border border-slate-200 shadow-sm space-y-10"&gt;&lt;h3 className="text-[11px] font-bold text-slate-400 uppercase tracking-[0.2em] underline decoration-indigo-200 decoration-4"&gt;Gasto por Categoría&lt;/h3&gt;&lt;div className="h-[400px] w-full"&gt;&lt;ResponsiveContainer width="100%" height="100%"&gt;&lt;BarChart data={categoryData} layout="vertical" margin={{ left: 10, right: 60, top: 10, bottom: 10 }}&gt;&lt;CartesianGrid strokeDasharray="3 3" horizontal={false} stroke="#F1F5F9" /&gt;&lt;XAxis type="number" hide /&gt;&lt;YAxis dataKey="name" type="category" axisLine={false} tickLine={false} fontSize={10} width={80} tick={{ fill: '#64748B', fontWeight: '900' }} /&gt;&lt;Tooltip cursor={{ fill: 'rgba(79, 70, 229, 0.05)' }} contentStyle={{ borderRadius: '15px', border: 'none', boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1)' }} /&gt;&lt;Bar dataKey="value" radius={[0, 15, 15, 0]} barSize={40}&gt;{categoryData.map((entry, index) =&gt; (&lt;Cell key={index} fill={COLORS[index % COLORS.length]} /&gt;))}&lt;LabelList dataKey="value" position="right" formatter={(v)=&gt;fmt(v)} style={{ fontWeight: 'black', fontSize: '12px', fill: '#1e293b' }} /&gt;&lt;/Bar&gt;&lt;/BarChart&gt;&lt;/ResponsiveContainer&gt;&lt;/div&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/main&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>{isMobileMode &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;nav className="absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-slate-100 h-24 flex justify-around items-center px-6 pb-8 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button onClick={() =&gt; { setActiveTab('Ahorros'); setShowMonthSelector(false); }} className={`flex flex-col items-center gap-1.5 flex-1 transition-all ${activeTab === 'Ahorros' ? 'text-indigo-600 scale-110 font-bold' : 'text-slate-300'}`}&gt;&lt;Icons.Piggy /&gt;&lt;span className="text-[9px] uppercase tracking-tighter"&gt;Bóveda&lt;/span&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="flex-1 flex justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;button onClick={() =&gt; setShowMonthSelector(!showMonthSelector)} className={`bg-slate-900 text-white p-5 rounded-2xl shadow-xl active:scale-90 transition-all border-4 border-white -translate-y-10 ${showMonthSelector ? 'bg-indigo-600 rotate-180' : ''}`}&gt;&lt;Icons.Calendar /&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>{showMonthSelector &amp;&amp; (&lt;div className="absolute bottom-32 left-1/2 -translate-x-1/2 bg-white rounded-3xl p-6 shadow-2xl border border-slate-200 grid grid-cols-3 gap-3 w-72 z-[200] animate-in zoom-in duration-300"&gt;{MONTHS.map(m =&gt; (&lt;button key={m} onClick={() =&gt; { setActiveTab(m); setShowMonthSelector(false); }} className={`p-3 text-[10px] font-bold rounded-xl uppercase transition-colors ${activeTab === m ? 'bg-indigo-600 text-white shadow-md' : 'bg-slate-50 text-slate-500 hover:bg-slate-100'}`}&gt;{m.slice(0, 3)}&lt;/button&gt;))}&lt;/div&gt;)}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button onClick={() =&gt; { setActiveTab('Préstamos'); setShowMonthSelector(false); }} className={`flex flex-col items-center gap-1.5 flex-1 transition-all ${activeTab === 'Préstamos' ? 'text-indigo-600 scale-110 font-bold' : 'text-slate-300'}`}&gt;&lt;Icons.Loans /&gt;&lt;span className="text-[9px] uppercase tracking-tighter"&gt;Deudas&lt;/span&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/nav&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>);</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const root = ReactDOM.createRoot(document.getElementById('root'));</p>
<p class="p1"><span class="Apple-converted-space">        </span>root.render(&lt;App /&gt;);</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
